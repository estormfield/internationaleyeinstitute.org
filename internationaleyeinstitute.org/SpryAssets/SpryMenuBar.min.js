"undefined"==typeof Spry&&(window.Spry={}),Spry.Widget||(Spry.Widget={}),Spry.BrowserSniff=function(){navigator.appName.toString(),navigator.platform.toString();var e=navigator.userAgent.toString();this.mozilla=this.ie=this.opera=this.safari=!1;var t=!1;(t=e.match(/Opera.([0-9\.]*)/i))?(this.opera=!0,this.version=parseFloat(t[1])):(t=e.match(/MSIE.([0-9\.]*)/i))?(this.ie=!0,this.version=parseFloat(t[1])):(t=e.match(/(applewebkit|safari)\/([\d\.]*)/i))?(this.safari=!0,this.version=parseFloat(t[2])):e.match(/gecko/i)&&(t=e.match(/rv:\s*([0-9\.]+)/i),this.mozilla=!0,this.version=parseFloat(t[1])),this.windows=this.mac=this.linux=!1,this.Platform=e.match(/windows/i)?"windows":e.match(/linux/i)?"linux":e.match(/mac/i)?"mac":e.match(/unix/i)?"unix":"unknown",this[this.Platform]=!0,this.v=this.version,this.safari&&this.mac&&this.mozilla&&(this.mozilla=!1)},Spry.is=new Spry.BrowserSniff,Spry.Widget.MenuBar=function(e,t){this.init(e,t)},Spry.Widget.MenuBar.prototype.init=function(e,t){if(this.element=this.getElement(e),this.currMenu=null,this.showDelay=250,this.hideDelay=600,!(void 0===document.getElementById||"Apple Computer, Inc."==navigator.vendor&&void 0===window.XMLHttpRequest||Spry.is.ie&&void 0===document.uniqueID)){if(Spry.is.ie&&Spry.is.version<7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}if(this.upKeyCode=Spry.Widget.MenuBar.KEY_UP,this.downKeyCode=Spry.Widget.MenuBar.KEY_DOWN,this.leftKeyCode=Spry.Widget.MenuBar.KEY_LEFT,this.rightKeyCode=Spry.Widget.MenuBar.KEY_RIGHT,this.escKeyCode=Spry.Widget.MenuBar.KEY_ESC,this.hoverClass="MenuBarItemHover",this.subHoverClass="MenuBarItemSubmenuHover",this.subVisibleClass="MenuBarSubmenuVisible",this.hasSubClass="MenuBarItemSubmenu",this.activeClass="MenuBarActive",this.isieClass="MenuBarItemIE",this.verticalClass="MenuBarVertical",this.horizontalClass="MenuBarHorizontal",this.enableKeyboardNavigation=!0,this.hasFocus=!1,t){for(var i in t)void 0===this[i]&&((new Image).src=t[i]);Spry.Widget.MenuBar.setOptions(this,t)}if(Spry.is.safari&&(this.enableKeyboardNavigation=!1),this.element){this.currMenu=this.element;for(var s=this.element.getElementsByTagName("li"),a=0;a<s.length;a++)0<a&&this.enableKeyboardNavigation&&(s[a].getElementsByTagName("a")[0].tabIndex="-1"),this.initialize(s[a],e),Spry.is.ie&&(this.addClassName(s[a],this.isieClass),s[a].style.position="static");if(this.enableKeyboardNavigation){var r=this;this.addEventListener(document,"keydown",function(e){r.keyDown(e)},!1)}if(Spry.is.ie){this.hasClassName(this.element,this.verticalClass)&&(this.element.style.position="relative");var n=this.element.getElementsByTagName("a");for(a=0;a<n.length;a++)n[a].style.position="relative"}}}},Spry.Widget.MenuBar.KEY_ESC=27,Spry.Widget.MenuBar.KEY_UP=38,Spry.Widget.MenuBar.KEY_DOWN=40,Spry.Widget.MenuBar.KEY_LEFT=37,Spry.Widget.MenuBar.KEY_RIGHT=39,Spry.Widget.MenuBar.prototype.getElement=function(e){return e&&"string"==typeof e?document.getElementById(e):e},Spry.Widget.MenuBar.prototype.hasClassName=function(e,t){return!!(e&&t&&e.className&&-1!=e.className.search(new RegExp("\\b"+t+"\\b")))},Spry.Widget.MenuBar.prototype.addClassName=function(e,t){e&&t&&!this.hasClassName(e,t)&&(e.className+=(e.className?" ":"")+t)},Spry.Widget.MenuBar.prototype.removeClassName=function(e,t){e&&t&&this.hasClassName(e,t)&&(e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),""))},Spry.Widget.MenuBar.prototype.addEventListener=function(e,t,i,s){try{e.addEventListener?e.addEventListener(t,i,s):e.attachEvent&&e.attachEvent("on"+t,i)}catch(e){}},Spry.Widget.MenuBar.prototype.createIframeLayer=function(e){var t=document.createElement("iframe");t.tabIndex="-1",t.src='javascript:""',t.frameBorder="0",t.scrolling="no",e.parentNode.appendChild(t),t.style.left=e.offsetLeft+"px",t.style.top=e.offsetTop+"px",t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px"},Spry.Widget.MenuBar.prototype.removeIframeLayer=function(e){for(var t=(e==this.element?e:e.parentNode).getElementsByTagName("iframe");0<t.length;)t[0].parentNode.removeChild(t[0])},Spry.Widget.MenuBar.prototype.clearMenus=function(e){for(var t=e.getElementsByTagName("ul"),i=0;i<t.length;i++)this.hideSubmenu(t[i]);this.removeClassName(this.element,this.activeClass)},Spry.Widget.MenuBar.prototype.bubbledTextEvent=function(){return Spry.is.safari&&(event.target==event.relatedTarget.parentNode||3==event.eventPhase&&event.target.parentNode==event.relatedTarget)},Spry.Widget.MenuBar.prototype.showSubmenu=function(e){this.currMenu&&(this.clearMenus(this.currMenu),this.currMenu=null),e&&(this.addClassName(e,this.subVisibleClass),void 0===document.all||Spry.is.opera||"KDE"==navigator.vendor||this.hasClassName(this.element,this.horizontalClass)&&e.parentNode.parentNode==this.element||(e.style.top=e.parentNode.offsetTop+"px"),Spry.is.ie&&Spry.is.version<7&&this.createIframeLayer(e)),this.addClassName(this.element,this.activeClass)},Spry.Widget.MenuBar.prototype.hideSubmenu=function(e){e&&(this.removeClassName(e,this.subVisibleClass),void 0===document.all||Spry.is.opera||"KDE"==navigator.vendor||(e.style.top="",e.style.left=""),Spry.is.ie&&Spry.is.version<7&&this.removeIframeLayer(e))},Spry.Widget.MenuBar.prototype.initialize=function(t,e){var i=t.getElementsByTagName("a")[0],s=t.getElementsByTagName("ul");(0<s.length?s[0]:null)&&this.addClassName(i,this.hasSubClass),Spry.is.ie||(t.contains=function(e){return null!=e&&(e==this||this.contains(e.parentNode))});var a=this;this.addEventListener(t,"mouseover",function(e){a.mouseOver(t,e)},!1),this.addEventListener(t,"mouseout",function(e){a.enableKeyboardNavigation&&a.clearSelection(),a.mouseOut(t,e)},!1),this.enableKeyboardNavigation&&(this.addEventListener(i,"blur",function(e){a.onBlur(t)},!1),this.addEventListener(i,"focus",function(e){a.keyFocus(t,e)},!1))},Spry.Widget.MenuBar.prototype.keyFocus=function(e,t){this.lastOpen=e.getElementsByTagName("a")[0],this.addClassName(this.lastOpen,0<e.getElementsByTagName("ul").length?this.subHoverClass:this.hoverClass),this.hasFocus=!0},Spry.Widget.MenuBar.prototype.onBlur=function(e){this.clearSelection(e)},Spry.Widget.MenuBar.prototype.clearSelection=function(e){if(this.lastOpen){if(e){e=e.getElementsByTagName("a")[0];for(var t=this.lastOpen;t!=this.element;){for(var i=e;i!=this.element;){if(i==t)return;try{i=i.parentNode}catch(e){break}}t=t.parentNode}}for(t=this.lastOpen;t!=this.element;){this.hideSubmenu(t.parentNode);var s=t.getElementsByTagName("a")[0];this.removeClassName(s,this.hoverClass),this.removeClassName(s,this.subHoverClass),t=t.parentNode}this.lastOpen=!1}},Spry.Widget.MenuBar.prototype.keyDown=function(e){if(this.hasFocus){if(this.lastOpen){e=e||event;var t=this.lastOpen.parentNode,i=this.lastOpen,s=t.getElementsByTagName("ul"),a=0<s.length?s[0]:null,r=!!a,n=[t,a,null,this.getSibling(t,"previousSibling"),this.getSibling(t,"nextSibling")];n[3]||(n[2]="li"==t.parentNode.parentNode.nodeName.toLowerCase()?t.parentNode.parentNode:null);var o=0;switch(e.keyCode){case this.upKeyCode:o=this.getElementForKey(n,"y",1);break;case this.downKeyCode:o=this.getElementForKey(n,"y",-1);break;case this.leftKeyCode:o=this.getElementForKey(n,"x",1);break;case this.rightKeyCode:o=this.getElementForKey(n,"x",-1);break;case this.escKeyCode:case 9:this.clearSelection(),this.hasFocus=!1;default:return}switch(o){case 0:return;case 1:this.mouseOver(t,e);break;case 2:this.mouseOut(n[2],e);break;case 3:case 4:this.removeClassName(i,r?this.subHoverClass:this.hoverClass)}return i=n[o].getElementsByTagName("a")[0],"ul"==n[o].nodeName.toLowerCase()&&(n[o]=n[o].getElementsByTagName("li")[0]),this.addClassName(i,0<n[o].getElementsByTagName("ul").length?this.subHoverClass:this.hoverClass),this.lastOpen=i,n[o].getElementsByTagName("a")[0].focus(),Spry.Widget.MenuBar.stopPropagation(e)}this.hasFocus=!1}},Spry.Widget.MenuBar.prototype.mouseOver=function(e,t){var i=e.getElementsByTagName("a")[0],s=e.getElementsByTagName("ul"),a=0<s.length?s[0]:null,r=!!a;if(this.enableKeyboardNavigation&&this.clearSelection(e),!this.bubbledTextEvent()&&(e.closetime&&clearTimeout(e.closetime),this.currMenu==e&&(this.currMenu=null),this.hasFocus&&i.focus(),this.addClassName(i,r?this.subHoverClass:this.hoverClass),this.lastOpen=i,a&&!this.hasClassName(a,this.subHoverClass))){var n=this;e.opentime=window.setTimeout(function(){n.showSubmenu(a)},this.showDelay)}},Spry.Widget.MenuBar.prototype.mouseOut=function(e,t){var i=e.getElementsByTagName("a")[0],s=e.getElementsByTagName("ul"),a=0<s.length?s[0]:null,r=!!a;if(!this.bubbledTextEvent()){var n=void 0!==t.relatedTarget?t.relatedTarget:t.toElement;if(!e.contains(n)){if(e.opentime&&clearTimeout(e.opentime),this.currMenu=e,this.removeClassName(i,r?this.subHoverClass:this.hoverClass),a){var o=this;e.closetime=window.setTimeout(function(){o.hideSubmenu(a)},this.hideDelay)}this.hasFocus&&i.blur()}}},Spry.Widget.MenuBar.prototype.getSibling=function(e,t){for(var i=e[t];i&&"li"!=i.nodeName.toLowerCase();)i=i[t];return i},Spry.Widget.MenuBar.prototype.getElementForKey=function(e,t,i){var s=0,a=Spry.Widget.MenuBar.getPosition,r=a(e[s]),n=!1;e[1]&&!this.hasClassName(e[1],this.MenuBarSubmenuVisible)&&(e[1].style.visibility="hidden",this.showSubmenu(e[1]),n=!0);for(var o=this.hasClassName(this.element,this.verticalClass),l="li"==e[0].parentNode.parentNode.nodeName.toLowerCase(),u=1;u<e.length;u++)if(("y"!=t||!o||1!=u&&2!=u)&&("x"!=t||o||l||1!=u&&2!=u)&&e[u]){var h=a(e[u]);i*h[t]<i*r[t]&&(r=h,s=u)}return e[1]&&n&&(this.hideSubmenu(e[1]),e[1].style.visibility=""),s},Spry.Widget.MenuBar.camelize=function(e){if(-1==e.indexOf("-"))return e;for(var t=e.split("-"),i=!0,s="",a=0;a<t.length;a++)if(0<t[a].length)if(i)s=t[a],i=!1;else{var r=t[a];s+=r.charAt(0).toUpperCase()+r.substring(1)}return s},Spry.Widget.MenuBar.getStyleProp=function(e,t){var i;try{if(e.style&&(i=e.style[Spry.Widget.MenuBar.camelize(t)]),!i)if(document.defaultView&&document.defaultView.getComputedStyle){var s=document.defaultView.getComputedStyle(e,null);i=s?s.getPropertyValue(t):null}else e.currentStyle&&(i=e.currentStyle[Spry.Widget.MenuBar.camelize(t)])}catch(e){}return"auto"==i?null:i},Spry.Widget.MenuBar.getIntProp=function(e,t){var i=parseInt(Spry.Widget.MenuBar.getStyleProp(e,t),10);return isNaN(i)?0:i},Spry.Widget.MenuBar.getPosition=function(e,t){if(t=t||document,"string"==typeof e&&(e=t.getElementById(e)),!e)return!1;if(null===e.parentNode||"none"==Spry.Widget.MenuBar.getStyleProp(e,"display"))return!1;var i,s={x:0,y:0},a=null;if(e.getBoundingClientRect){i=e.getBoundingClientRect();var r=t.documentElement.scrollTop||t.body.scrollTop,n=t.documentElement.scrollLeft||t.body.scrollLeft;s.x=i.left+n,s.y=i.top+r}else if(t.getBoxObjectFor)i=t.getBoxObjectFor(e),s.x=i.x,s.y=i.y;else{if(s.x=e.offsetLeft,s.y=e.offsetTop,(a=e.offsetParent)!=e)for(;a;)s.x+=a.offsetLeft,s.y+=a.offsetTop,a=a.offsetParent;(Spry.is.opera||Spry.is.safari&&"absolute"==Spry.Widget.MenuBar.getStyleProp(e,"position"))&&(s.y-=t.body.offsetTop)}if((a=e.parentNode?e.parentNode:null).nodeName)for(var o=a.nodeName.toUpperCase();a&&"BODY"!=o&&"HTML"!=o;)o=a.nodeName.toUpperCase(),s.x-=a.scrollLeft,s.y-=a.scrollTop,a=a.parentNode?a.parentNode:null;return s},Spry.Widget.MenuBar.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1},Spry.Widget.MenuBar.setOptions=function(e,t,i){if(t)for(var s in t)i&&null==t[s]||(e[s]=t[s])};